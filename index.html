<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE NEXT HIKE</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Top bar with the brand name and hamburger menu -->
    <div class="top-bar">
        <div class="brand-name">
            <a href="index.html">THE NEXT HIKE</a>
        </div>
        <div class="hamburger-menu" onclick="toggleMenu()">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="menu">
            <a href="index.html">Next Hike</a>
            <a href="futurehike.html">Future Hike</a>
            <div onclick="openModal('pnbContactModal')">Contact</div>
        </div>
    </div>

    <!-- Main Content Container -->
    <div class="container mt-5 pt-5">
        <!-- Contact Modal -->
        <section id="happenings" class="carousel-section mt-4">
            <div id="route1Content"></div>
            <!-- contact info stuff -->
            <div class="modal fade" id="pnbContactModal" tabindex="-1" aria-labelledby="pnbContactModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="pnbContactModalLabel">Hi!</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <img src="assets/underconstruction2.webp" class="img-fluid" alt="Under Construction">
                            <!-- Detailed information for this hike goes here -->
                            <p>Thanks for visiting. This site is under construction</p>
                            <p>See you on the trails!</p>
                            <p>Feel free to shoot me an email: pandbsoftware@gmail.com</p>
                            <p>Also text me! Same number of old. - Jay</p>
                            <img src="assets/contact/solo.jpg" class="img-fluid d-block mx-auto" alt="1989">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Next Hike Section -->
        <section id="nexthike">
            <div id="NextHike" class="hike-section-container">
                <div id="CarbonCanyonRedwoods">
                    <div class="hike-header">
                        <div class="hike-what">
                            <div class="hike-label">WHAT:</div>
                            <div class="hike-value">
                                <a href="https://www.alltrails.com/trail/us/california/redwood-trail-and-carbon-canyon-dam-loop">Carbon Canyon Redwoods</a>
                            </div>
                        </div>
                        <div class="hike-when">
                            <div class="hike-label">WHEN:</div>
                            <div class="hike-value">Saturday, June 21, 2025</div>
                        </div>
                        <div class="hike-where">
                            <div class="hike-label">WHERE:</div>
                            <div class="hike-value">
                                <a href="https://maps.app.goo.gl/BAkMW7hHsFNrMw5r6">Olinda Ranch / Carbon Canyon</a>
                            </div>
                        </div>
                        <div class="hike-time">
                            <div class="hike-label">TIME:</div>
                            <div class="hike-value">9:00AM</div>
                        </div>
                    </div>

                    <!-- Distance Table -->
                    <table class="distance-table">
                        <thead>
                            <tr>
                                <th>Difficulty</th>
                                <th>Miles</th>
                                <th>Elevation Gain</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Easy</td>
                                <td>4.3</td>
                                <td>192'</td>
                            </tr>
                            <tr>
                                <td>Moderate</td>
                                <td>7.4</td>
                                <td>421'</td>
                            </tr>
                            <tr>
                                <td>Hard</td>
                                <td>17.2</td>
                                <td>1935'</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Parking Info -->
                    <div class="parking-info">
                        <img src="assets/parking-icon.png" alt="Parking Icon">
                        <p>
                            <strong>Parking:</strong>
                            <a href="https://maps.app.goo.gl/FNCAnRbokZ9SwBxW8" target="_blank" rel="noopener noreferrer">
                                <b>Olinda Ranch Parking Lot</b>
                            </a>
                        </p>
                    </div>

                    <!-- Google Maps Embed -->
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1738.664898790005!2d-117.83670806627669!3d33.92251582378129!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80dcd487233ba4db%3A0xd8d665ed8c53a7!2sOlinda%20Ranch%20Parking%20Lot!5e0!3m2!1sen!2sus!4v1750187303477!5m2!1sen!2sus" 
                        width="100%" 
                        height="600" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade"
                    ></iframe>

                    <!-- Air Quality Widget -->
                    <script>
                      (function(d, s, id) {
                          if (d.getElementById(id)) {
                              if (window.__TOMORROW__) {
                                  window.__TOMORROW__.renderWidget();
                              }
                              return;
                          }
                          const fjs = d.getElementsByTagName(s)[0];
                          const js = d.createElement(s);
                          js.id = id;
                          js.src = "https://www.tomorrow.io/v1/widget/sdk/sdk.bundle.min.js";
              
                          fjs.parentNode.insertBefore(js, fjs);
                      })(document, 'script', 'tomorrow-sdk');
                      </script>
              
                      <div class="tomorrow"
                         data-location-id="113969"
                         data-language="EN"
                         data-unit-system="IMPERIAL"
                         data-skin="light"
                         data-widget-type="aqiPollen"
                         style="padding-bottom:22px;position:relative;"
                      >
                        <a
                          href="https://weather.tomorrow.io/"
                          rel="nofollow noopener noreferrer"
                          target="_blank"
                          style="position: absolute; bottom: 0; transform: translateX(-50%); left: 50%;"
                        >
                          <img
                            alt="Powered by Tomorrow.io"
                            src="https://weather-website-client.tomorrow.io/img/powered-by.svg"
                            width="250"
                            height="18"
                          />
                        </a>
                      </div> 
       
                    <!-- Trail Information and Maps -->
                    <div id="carbon-footer">
                        <div class="map-info">
                            <img src="assets/MapVector2.png" alt="Map Icon">
                        </div>

                        <!-- Easy Trail -->
                        <div class="circle">Easy</div>
                        <p style="text-align: center;">4.3 Miles, 192' Elev Gain</p>
                        <p class="gpx-link">
                            <a href="assets/CarbonCanyonRedwoods/CarbonCanyonRedwoods4.gpx" class="gpx-download">ðŸ“¥ GPX Download</a>
                        </p>
                        <iframe 
                            class="alltrails" 
                            src="https://www.alltrails.com/widget/map/carbon-canyon-4mi-loop-f1e5284?u=i&sh=t1soyj" 
                            width="100%" 
                            height="400" 
                            frameborder="0" 
                            scrolling="no" 
                            marginheight="0" 
                            marginwidth="0" 
                            title="AllTrails: Trail Guides and Maps for Hiking, Camping, and Running"
                        ></iframe>

                        <!-- Moderate Trail -->
                        <div class="blue-square">Med</div>
                        <p style="text-align: center;">7.4 Miles, 421' Elev Gain</p>
                        <p class="gpx-link">
                            <a href="assets/CarbonCanyonRedwoods/CarbonCanyonRedwoods7.gpx" class="gpx-download">ðŸ“¥ GPX Download</a>
                        </p>
                        <iframe 
                            class="alltrails" 
                            src="https://www.alltrails.com/widget/map/carbon-canyon-7mi-loop-b1790a5?u=i&sh=t1soyj" 
                            width="100%" 
                            height="400" 
                            frameborder="0" 
                            scrolling="no" 
                            marginheight="0" 
                            marginwidth="0" 
                            title="AllTrails: Trail Guides and Maps for Hiking, Camping, and Running"
                        ></iframe>

                        <!-- Hard Trail -->
                        <div class="black-diamond">Hard</div>
                        <p style="text-align: center;">17.2 Miles, 1,935' Elev Gain</p>
                        <p class="gpx-link">
                            <a href="assets/CarbonCanyonRedwoods/CarbonCanyonRedwoods17.gpx" class="gpx-download">ðŸ“¥ GPX Download</a>
                        </p>
                        <iframe 
                            class="alltrails" 
                            src="https://www.alltrails.com/widget/map/cc-ch-peak-17mi-487d4c6?u=i&sh=t1soyj" 
                            width="100%" 
                            height="400" 
                            frameborder="0" 
                            scrolling="no" 
                            marginheight="0" 
                            marginwidth="0" 
                            title="AllTrails: Trail Guides and Maps for Hiking, Camping, and Running"
                        ></iframe>
                    </div>
                </div>
            </div>
        </section>

        <!-- Future Hike Button -->
        <div class="text-center my-4">
            <a href="futurehike.html" class="btn btn-primary btn-lg">See Future Hike</a>
        </div>
    </div>

    <!-- Scripts -->
    <script src="route-loader.js"></script>
    <!-- Bootstrap and Custom JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <!-- AQI Widget Error Handling -->
    <script>
        // Check if iframe is loaded
        onload()
        {
            const iframe = document.querySelector('.aqi-widget-item iframe');
            if (iframe && iframe.contentWindow && iframe.contentWindow.document.body.innerHTML.trim()) {
                document.querySelector('.aqi-widget-fallback').style.display = 'none';
            } else {
                document.querySelector('.aqi-widget-fallback').style.display = 'block';
            }
        }

        // Handle loading errors
        onerror()
        {
            document.querySelector('.aqi-widget-fallback').style.display = 'block';
        }

        // Check after 5 seconds if it hasn't loaded
        setTimeout(() => {
            if (!iframe.contentWindow || !iframe.contentWindow.document.body.innerHTML.trim()) {
                console.error('AQI widget timed out');
                document.querySelector('.aqi-widget-fallback').style.display = 'block';
            }
        }, 5000);
    </script>
</body>
</html>
    <script>
      // Add error handling for the AQI widget
      const iframe = document.querySelector('.aqi-widget-container iframe');
      const fallback = document.querySelector('.aqi-widget-fallback');

      if (!iframe) {
        console.error('AQI iframe element not found');
        fallback.style.display = 'block';
        return;
      }

      // Check if iframe is loaded
      iframe.onload = function() {
        console.log('AQI widget loaded');
        try {
          const content = iframe.contentWindow.document.body.innerHTML.trim();
          if (!content) {
            console.error('AQI widget loaded but is empty');
            fallback.style.display = 'block';
            iframe.style.display = 'none';
          }
        } catch (e) {
          console.error('Error accessing iframe content:', e);
          fallback.style.display = 'block';
          iframe.style.display = 'none';
        }
      };

      // Handle loading errors
      iframe.onerror = function() {
        console.error('AQI widget failed to load');
        fallback.style.display = 'block';
        iframe.style.display = 'none';
      };

      // Check after 5 seconds if it hasn't loaded
      setTimeout(() => {
        if (!iframe.contentWindow || !iframe.contentWindow.document.body.innerHTML.trim()) {
          console.error('AQI widget timed out');
          fallback.style.display = 'block';
          iframe.style.display = 'none';
        }
      }, 5000);
    </script>

    <footer class="site-footer">
    <p>Â© Just Around the Corner Hiking Club â€¢ Est. 2023</p>
    <p>
      Powered by 
      <a href="https://github.com/spaceshiptrip/thenexthike.com" target="_blank" rel="noopener noreferrer">
        GitHub
      </a> 
      for 
      <a href="https://github.com/spaceshiptrip">SpaceshipTrip</a>
    </p>
  </footer>

  <!-- WeatherWidget -->
  <script defer>
    !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = 'https://weatherwidget.io/js/widget.min.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'weatherwidget-io-js');
  </script>
</body>

</html>
